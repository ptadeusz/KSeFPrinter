<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs">
  <Fragment>

    <!-- API Components - Main executable with Windows Service -->
    <ComponentGroup Id="APIServiceComponents" Directory="APIINSTALLFOLDER">
      <!-- Main API Executable with Windows Service Installation -->
      <Component Id="KSeFPrinterAPIExeComponent" Guid="A9B8C7D6-E5F4-4A3B-9C2D-1E0F9A8B7C6D">
        <File Id="KSeFPrinterAPIExe"
              Source="$(var.APIPublishDir)KSeFPrinter.API.exe"
              KeyPath="yes" />

        <ServiceInstall
          Id="KSeFPrinterAPIService"
          Name="KSeFPrinterAPI"
          DisplayName="KSeF Printer API"
          Description="REST API dla generowania wydruków PDF z faktur elektronicznych KSeF. UWAGA: Wymaga ważnej licencji (license.lic) w folderze instalacji."
          Type="ownProcess"
          Start="demand"
          Account="LocalSystem"
          ErrorControl="normal"
          Interactive="no">
          <ServiceDependency Id="HTTP" />
        </ServiceInstall>

        <ServiceControl
          Id="StartKSeFPrinterAPIService"
          Name="KSeFPrinterAPI"
          Start="install"
          Stop="both"
          Remove="uninstall"
          Wait="yes" />
      </Component>
    </ComponentGroup>

    <!-- Examples Components -->
    <ComponentGroup Id="ExamplesComponents">
      <!-- XML Examples -->
      <Component Id="ExamplesXMLComponent" Directory="EXAMPLESXMLINSTALLFOLDER" Guid="E5F6A7B8-C9D0-4E5F-8A7B-9C0D1E2F3A4B">
        <File Source="..\examples\xml\FakturaTEST017.xml" />
        <File Source="..\examples\xml\FakturaTEST017_Stress_Duza.xml" />
        <File Source="..\examples\xml\FakturaTEST017_Faza3_Kompletny.xml" />
        <File Source="..\examples\xml\FakturaTEST017_Rozliczenie.xml" />
        <File Source="..\examples\xml\FakturaTEST017_WieleRachunkow.xml" />
      </Component>

      <!-- Output Examples (generated PDFs) -->
      <Component Id="ExamplesOutputComponent" Directory="EXAMPLESOUTPUTINSTALLFOLDER" Guid="F6A7B8C9-D0E1-4F5A-8B7C-9D0E1F2A3B4C">
        <File Source="..\examples\output\FakturaTEST017.pdf" />
        <File Source="..\examples\output\FakturaTEST017_Stress_Duza_Fixed.pdf" />
      </Component>
    </ComponentGroup>

    <!-- Documentation Components -->
    <ComponentGroup Id="DocumentationComponents">
      <Component Id="DocumentationFilesComponent" Directory="DOCUMENTATIONINSTALLFOLDER" Guid="B1C2D3E4-F5A6-4B7C-8D9E-0F1A2B3C4D5E">
        <File Id="InstallationGuideFile" Source="Documentation\INSTALLATION_GUIDE.md" KeyPath="yes" />
        <File Id="LicenseGuideFile" Source="Documentation\LICENSE_GUIDE.md" />
        <File Id="CertificateGuideFile" Source="Documentation\CERTIFICATE_GUIDE.md" />
        <File Id="LicenseTemplateFile" Source="Documentation\license.lic.template" />
      </Component>
    </ComponentGroup>

  </Fragment>
</Wix>
